{% extends 'base.html' %}
{% load thumbnail %}

{% block title %}
    products
{% endblock %}

{% block content %}

    {% for data in categories %}

        <div class="container">
            <div class="dropdown show">
                <a href="{{ data.get_absolute_url }}">{{ data.name }}</a>
                <a class="btn btn-secondary dropdown-toggle" href="#" role="button"
                   id="dropdownMenuLink"
                   data-toggle="dropdown"
                   aria-haspopup="true" aria-expanded="false">

                </a>

                <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                    {% for sub in data.sub.all %}
                        <a class="dropdown-item" href="{{ sub.get_absolute_url }}">{{ sub.name }}</a>
                    {% endfor %}
                </div>
            </div>
        </div>

    {% endfor %}
    <hr>
    <h1>all Products</h1>
    <div class="container">
        {% for product in products %}

            <div class="d-flex flex-column justify-content-center align-items-center">
                <h3>{{ product.name }}</h3>
                {% thumbnail product.image "100x100" crop="center" as im %}
                    <img src="{{ im.url }}">
                {% endthumbnail %}
                {% if product.discount %}
                    <strike>{{ product.unit_price }}</strike>
                    <p>{{ product.total_price }}</p>
                {% else %}
                    <p>{{ product.unit_price }}</p>
                {% endif %}
                <a href="{{ product.get_absolute_url }}">Detail</a>
                <hr class="w-50">
            </div>
        {% endfor %}
    </div>
    <hr>
    <nav aria-label="Page navigation example">
        <ul class="pagination">
            {% if products.has_previous %}
                <li class="page-item"><a class="page-link" href="?page={{ products.previous_page_number }}">Previous</a>
                </li>
                <li class="page-item"><a class="page-link"
                                         href="?page={{ products.previous_page_number }}">{{ products.previous_page_number }}</a>
                </li>
            {% endif %}

            <li class="page-item"><a class="page-link {% if page_num == page_num %} active {% endif %}"
                                     href="?page={{ products.number }}"
                                     style="background-color: blue ; color: aliceblue">{{ products.number }}</a>
            </li>

            {% if products.has_next %}
                <li class="page-item"><a class="page-link"
                                         href="?page={{ products.next_page_number }}">{{ products.next_page_number }}</a>
                </li>
                <li class="page-item"><a class="page-link" href="?page={{ products.next_page_number }}">Next</a></li>
            {% endif %}

        </ul>
    </nav>
{% endblock %}